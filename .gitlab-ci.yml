stages:
- package
- test

test:
  image: alpine:3.18
  script:
  - apk add git neovim
  - git clone --depth 1 https://github.com/nvim-lua/plenary.nvim ~/.local/share/nvim/site/pack/vendor/start/plenary.nvim
  - ln -s $(pwd) ~/.local/share/nvim/site/pack/vendor/start
  - nvim --headless -c "PlenaryBustedDirectory spec/" -c cquit
  stage: test
